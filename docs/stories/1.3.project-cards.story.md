# Story 1.3: Project Card Components in 3D Space

## Status
Draft

## Story
**As a** visitor,
**I want** to see three floating project cards arranged in 3D space,
**so that** I can identify the major projects at a glance.

## Acceptance Criteria

1. `src/components/3d/ProjectCard.jsx` component created accepting props: `position`, `title`, `description`
2. Three project cards instantiated in scene:
   - Thermax SmartPID at position `[-3, 0, 0]`
   - Navisworks Integration at position `[0, 0, 0]`
   - Console Applications at position `[3, 0, 0]`
3. Each card renders as 3D mesh with `<Box>` geometry (dimensions: 2 x 2.5 x 0.1)
4. Card meshes use `<meshStandardMaterial>` with appropriate color/texture
5. Text rendered on card faces using drei's `<Text>` component showing project title
6. Cards have subtle hover effect (scale up 1.1x) when mouse enters (desktop only)
7. Cards have subtle floating animation (gentle up/down oscillation using sine wave)
8. All three cards visible in viewport without camera movement
9. Cards maintain readable text from default camera position
10. 3D scene maintains 60 FPS with all three cards rendered

## Tasks / Subtasks

- [ ] Create ProjectCard component with TypeScript interface (AC: 1)
  - [ ] Create file `src/components/3d/ProjectCard.tsx`
  - [ ] Define ProjectCardProps interface with: position, title, description
  - [ ] Export ProjectCard component with named export
  - [ ] Set up component structure following 3D component template

- [ ] Implement card 3D mesh geometry (AC: 3, 4)
  - [ ] Add mesh element with ref for animation
  - [ ] Use Box geometry from drei with args: [2, 2.5, 0.1]
  - [ ] Apply meshStandardMaterial with theme color (e.g., primary-500)
  - [ ] Position mesh using position prop

- [ ] Add text rendering on card face (AC: 5, 9)
  - [ ] Import Text component from @react-three/drei
  - [ ] Position text on front face of card (z offset: 0.06)
  - [ ] Set text properties: fontSize, color, maxWidth
  - [ ] Use title prop for text content
  - [ ] Ensure text is readable from camera position [0, 0, 5]

- [ ] Implement hover effect (AC: 6)
  - [ ] Add useState for hover state
  - [ ] Add onPointerEnter handler to set hover true
  - [ ] Add onPointerLeave handler to set hover false
  - [ ] Scale mesh to 1.1x when hovered using scale prop
  - [ ] Add smooth transition with lerp or spring animation

- [ ] Implement floating animation (AC: 7)
  - [ ] Use useFrame hook to animate position
  - [ ] Calculate Y offset using sine wave: Math.sin(time) * amplitude
  - [ ] Set amplitude to 0.1-0.2 for subtle effect
  - [ ] Apply Y offset to mesh position
  - [ ] Ensure animation is smooth and continuous

- [ ] Create project data and instantiate cards in Scene (AC: 2, 8, 10)
  - [ ] Create `src/data/projects.ts` file
  - [ ] Define project data with title, description, position for 3 projects
  - [ ] Import ProjectCard in Scene.tsx
  - [ ] Render 3 ProjectCard instances with project data
  - [ ] Verify all cards visible without camera movement
  - [ ] Test performance maintains 60 FPS with 3 cards

- [ ] Test and verify rendering (AC: 9, 10)
  - [ ] Verify text is readable from default camera position
  - [ ] Check hover effect works on all cards (desktop)
  - [ ] Confirm floating animation is subtle and smooth
  - [ ] Test performance in Chrome DevTools (60 FPS target)
  - [ ] Check console for warnings or errors

## Dev Notes

### Previous Story Insights
[Source: Story 1.1 and 1.2 Completion]

**Story 1.1 established:**
- Vite + React + TypeScript project with all dependencies
- Project folder structure with `src/components/3d/` directory
- Tailwind CSS configured with theme colors

**Story 1.2 established:**
- Scene.tsx with Canvas and camera setup at [0, 0, 5]
- Lighting system (ambient + directional)
- Test geometry rendering successfully
- 60 FPS performance baseline established

**Key Learnings for Story 1.3:**
- 3D scene is functional and ready for content
- Camera positioned at [0, 0, 5] looking at origin
- Theme colors available for materials
- useFrame hook for animations
- Performance target: 60 FPS

### 3D Component Structure
[Source: docs/ui-architecture.md#Component Standards]

**ProjectCard Component Template:**
```typescript
// src/components/3d/ProjectCard.tsx

import React, { useRef, useState } from 'react';
import { useFrame } from '@react-three/fiber';
import { Box, Text } from '@react-three/drei';
import * as THREE from 'three';

interface ProjectCardProps {
  position: [number, number, number];
  title: string;
  description: string;
}

export const ProjectCard: React.FC<ProjectCardProps> = ({
  position,
  title,
  description
}) => {
  const meshRef = useRef<THREE.Mesh>(null);
  const [hovered, setHovered] = useState(false);

  // Floating animation
  useFrame((state) => {
    if (meshRef.current) {
      // Sine wave oscillation
      meshRef.current.position.y = position[1] + Math.sin(state.clock.elapsedTime) * 0.15;
    }
  });

  return (
    <mesh
      ref={meshRef}
      position={position}
      onPointerEnter={() => setHovered(true)}
      onPointerLeave={() => setHovered(false)}
      scale={hovered ? 1.1 : 1}
    >
      <boxGeometry args={[2, 2.5, 0.1]} />
      <meshStandardMaterial color={hovered ? '#2563eb' : '#3b82f6'} />

      <Text
        position={[0, 0, 0.06]}
        fontSize={0.3}
        color="#ffffff"
        maxWidth={1.8}
        textAlign="center"
      >
        {title}
      </Text>
    </mesh>
  );
};
```

### drei Text Component
[Source: docs/ui-architecture.md#Frontend Tech Stack]

**Text Component from @react-three/drei:**
- Pre-built component for 3D text rendering
- Props: position, fontSize, color, maxWidth, textAlign
- Automatically handles font loading and mesh generation
- Position text in front of card face (z offset: 0.06 to avoid z-fighting)

**Example Usage:**
```typescript
<Text
  position={[0, 0, 0.06]}  // Slightly in front of card
  fontSize={0.3}            // Readable size
  color="#ffffff"           // White text
  maxWidth={1.8}            // Wrap text within card width
  textAlign="center"        // Center alignment
>
  {title}
</Text>
```

### Project Data Structure
[Source: docs/ui-architecture.md#Data Files]

**File Location:** `src/data/projects.ts`

**Data Structure:**
```typescript
// src/data/projects.ts

export interface ProjectData {
  id: string;
  title: string;
  description: string;
  position: [number, number, number];
}

export const projects: ProjectData[] = [
  {
    id: 'thermax',
    title: 'Thermax SmartPID',
    description: 'Automated P&ID generation for THERMAX, L&T, PRAJ',
    position: [-3, 0, 0],
  },
  {
    id: 'navisworks',
    title: 'Navisworks Integration',
    description: 'Custom Navisworks plugin development',
    position: [0, 0, 0],
  },
  {
    id: 'console',
    title: 'Console Applications',
    description: 'C# automation tools and utilities',
    position: [3, 0, 0],
  },
];
```

### Animation with useFrame
[Source: docs/ui-architecture.md#Component Standards]

**useFrame Hook:**
- Called every frame (60 FPS)
- Provides state object with clock.elapsedTime
- Use for continuous animations

**Floating Animation Pattern:**
```typescript
useFrame((state) => {
  if (meshRef.current) {
    // Sine wave for smooth oscillation
    const time = state.clock.elapsedTime;
    const amplitude = 0.15; // Subtle movement
    const speed = 1.0; // Animation speed

    meshRef.current.position.y = baseY + Math.sin(time * speed) * amplitude;
  }
});
```

### Hover Interaction
[Source: docs/ui-architecture.md#3D Component Rules]

**Pointer Events on 3D Meshes:**
- `onPointerEnter`: Fires when mouse enters mesh bounds
- `onPointerLeave`: Fires when mouse exits mesh bounds
- Desktop only (mobile uses tap for different interaction)

**Scale Transition:**
- Use scale prop on mesh: `scale={hovered ? 1.1 : 1}`
- React Three Fiber automatically lerps scale changes for smooth transition
- Alternative: Use react-spring for more control

### Camera and Viewport Considerations
[Source: Story 1.2 - Camera Setup]

**Camera Configuration:**
- Position: [0, 0, 5]
- FOV: 75
- Looking at origin [0, 0, 0]

**Card Positioning:**
- Cards at Y=0 are horizontally centered in view
- Spacing: 3 units between cards ([-3, 0, 3])
- All cards should fit in viewport without camera movement
- Text size 0.3 is readable from distance of 5 units

### Theme Colors for Materials
[Source: docs/ui-architecture.md#Tailwind Configuration]

**Available Colors:**
- Primary blue: `#3b82f6` (default state)
- Primary blue darker: `#2563eb` (hover state)
- Accent cyan: `#06b6d4` (alternative)
- Text: `#ffffff` (white for contrast)

### Performance Considerations
[Source: docs/prd.md#Non-Functional Requirements]

**NFR1:** 60 FPS on desktop with all three cards

**Optimization Tips:**
- Box geometry is lightweight (12 triangles)
- meshStandardMaterial works with scene lighting
- Text component from drei is optimized
- 3 cards + animations should maintain 60 FPS easily
- Monitor with Chrome DevTools Performance tab

### Component File Naming
[Source: docs/ui-architecture.md#File Naming Conventions]

- ProjectCard.tsx: `src/components/3d/ProjectCard.tsx`
- projects.ts: `src/data/projects.ts`
- PascalCase for components (.tsx)
- camelCase for data files (.ts)

### Testing
**Testing Standards:**
[Source: docs/ui-architecture.md#Testing Requirements]

- Manual testing only for MVP
- Visual verification of card rendering
- Test hover effects with mouse interaction
- Verify floating animation is smooth
- Performance testing: 60 FPS with 3 cards
- Check text readability from default camera position
- No automated tests required

**Key Test Points:**
1. All 3 cards render in correct positions
2. Text is visible and readable on all cards
3. Hover effect works (scale 1.1x)
4. Floating animation is subtle and continuous
5. Performance maintains 60 FPS
6. No console errors or warnings

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-10-31 | 1.0 | Initial story creation | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used
_To be filled by Dev Agent_

### Debug Log References
_To be filled by Dev Agent_

### Completion Notes List
_To be filled by Dev Agent_

### File List
_To be filled by Dev Agent_

---

## QA Results
_To be filled by QA Agent_
